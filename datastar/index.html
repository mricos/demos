<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D* SVG</title>
    <script type="module" src="https://cdn.jsdelivr.net/gh/starfederation/datastar@1.0.0-beta.11/bundles/datastar.js"></script>
    <link rel="stylesheet" href="static/css/main.css">
    <script src="https://cdn.jsdelivr.net/npm/animejs/lib/anime.iife.min.js"></script>
    <script>
    const { animate, svg } = anime;
    </script>
</head>
<body>
    <header>ðŸ¤¯ KIKI = BOOBA ??! ðŸ¤¯</header>
    <main>
        <div id="input-container">
            <input type="checkbox" data-bind-labels>
            <input type="number" data-bind-width value="8" min="1" max="20">
            <input type="checkbox" data-bind-rainbow>
            <select data-bind-fill>
                <option value="">nofill</option>
                <option value="#lg1">french</option>
                <option value="#lg2">spanish</option>
            </select>
            <select data-bind-outline>
                <option value="none">solid</option>
                <option value="20, 10">dashed</option>
                <option value="5, 20">dotted</option>
            </select>
            <button data-on-click="
            animate(svg1, {
                scale: 1.02,
                filter: 'drop-shadow(2px 0px 2px black)',
                loop: true,
                alternate: true,
            });
            ">ðŸ¤¯</button>
            <input type="range" data-bind-zoom min="-200" max="0">
            <input type="range" data-signals-time="0" data-bind-time min=0 max=5000 data-on-raf="animation.seek($time)">
        </div>
        <div id="svg-container">
            <svg
            id="svg1"
            data-computed-vb.width="600 - $zoom"
            data-computed-vb.heigth="250 - $zoom"
            data-attr="{'viewBox': [0, 0, $vb.width, $vb.heigth].join(' ')}"
            preserveAspectRatio="xMidYMid slice"
            >
            <defs>
                <linearGradient id="lg1">
                    <stop offset="0%" stop-color="blue" />
                    <stop offset="50%" stop-color="white" />
                    <stop offset="100%" stop-color="red" />
                </linearGradient>
                <linearGradient id="lg2" gradientTransform="rotate(90)">
                    <stop offset="0%" stop-color="red" />
                    <stop offset="50%" stop-color="yellow" />
                    <stop offset="100%" stop-color="red" />
                </linearGradient>
                <path id="path1" d="M50,50 L70,30 L90,45 L110,25 L130,50 L150,30 L170,55 L150,70 L170,90 L150,110 L170,130 L145,140 L125,120 L105,145 L85,120 L65,140 L45,120 L30,100 L50,80 L30,60 Z"/>
                <path id="path2" d="M350,90 C370,60 400,60 420,80 C450,60 480,70 490,100 C510,120 500,150 480,160 C490,180 470,200 440,190 C420,210 380,210 360,190 C330,200 320,170 330,150 C310,130 330,90 350,90 Z"/>
            </defs>
            <g
            stroke="red"
            data-attr-stroke-width="$width"
            data-attr-rainbow="$rainbow"
            fill="none"
            stroke-linecap="round"
            >
                <g
                id="g1"
                >
                    <use
                    href="#path1"
                    data-attr-fill="'url(' + $fill + ')'"
                    />
                    <text stroke-width="1" paint-order="stroke fill markers">
                        <textPath 
                        data-show="$labels"
                        data-text="($time < 1000 && 'kiki') || ($time < 3000 && 'booki') || 'booba'"
                        href="#path1"></textPath>
                    </text>
                </g>
                <use
                href="#path2"
                data-attr-stroke-dasharray="$outline"
                />
            </g>
            </svg>
        </div>
    </main>
    <script>
        const animation = animate(path1, {
            d: svg.morphTo(path2),
            duration: 5000,
            autoplay: false,
        });
    </script>
</body>
</html>
