<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Characteristic Function Visualizer</title>
<style>
body { margin:0; font-family: sans-serif; background:#111; color:#ddd; }
#controls { padding:10px; background:#222; }
canvas { display:block; margin:0 auto; background:#000; }
label { margin-right:15px; }
</style>
</head>
<body>

<div id="controls">
  <label>
    Distribution:
    <select id="dist">
      <option value="gaussian">Gaussian</option>
      <option value="uniform">Uniform</option>
      <option value="bimodal">Bimodal</option>
    </select>
  </label>
  <label>
    t (frequency):
    <input type="range" id="tSlider" min="-20" max="20" step="0.1" value="1">
    <span id="tVal">1</span>
  </label>
</div>

<canvas id="canvas" width="900" height="500"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const distSelect = document.getElementById("dist");
const tSlider = document.getElementById("tSlider");
const tVal = document.getElementById("tVal");

const W = canvas.width;
const H = canvas.height;

function gaussian(x, mu=0, sigma=1){
  return Math.exp(-0.5*((x-mu)/sigma)**2)/(sigma*Math.sqrt(2*Math.PI));
}

function uniform(x, a=-2, b=2){
  return (x>=a && x<=b) ? 1/(b-a) : 0;
}

function bimodal(x){
  return 0.5*gaussian(x,-2,0.6) + 0.5*gaussian(x,2,0.6);
}

function getPDF(x){
  const d = distSelect.value;
  if(d==="gaussian") return gaussian(x,0,1);
  if(d==="uniform") return uniform(x,-3,3);
  if(d==="bimodal") return bimodal(x);
}

function computeCharacteristic(t){
  let re=0, im=0;
  const N=2000;
  const xmin=-6, xmax=6;
  const dx=(xmax-xmin)/N;

  for(let i=0;i<N;i++){
    const x=xmin+i*dx;
    const p=getPDF(x);
    re += p*Math.cos(t*x)*dx;
    im += p*Math.sin(t*x)*dx;
  }
  return {re, im};
}

function draw(){
  ctx.clearRect(0,0,W,H);

  const t = parseFloat(tSlider.value);
  tVal.textContent = t.toFixed(2);

  const pdfHeight = 200;
  const centerY = pdfHeight+20;

  // Draw PDF
  ctx.strokeStyle="white";
  ctx.beginPath();
  for(let i=0;i<W;i++){
    const x = (i/W)*12 - 6;
    const y = getPDF(x);
    const py = pdfHeight - y*200;
    if(i===0) ctx.moveTo(i,py);
    else ctx.lineTo(i,py);
  }
  ctx.stroke();

  ctx.fillStyle="#888";
  ctx.fillText("Probability Density",10,15);

  // Draw phase vectors
  const {re,im} = computeCharacteristic(t);

  const unitX = W/2;
  const unitY = centerY+200;

  ctx.strokeStyle="#444";
  ctx.beginPath();
  ctx.arc(unitX,unitY,100,0,2*Math.PI);
  ctx.stroke();

  ctx.strokeStyle="cyan";
  ctx.beginPath();
  ctx.moveTo(unitX,unitY);
  ctx.lineTo(unitX + re*100, unitY - im*100);
  ctx.stroke();

  ctx.fillStyle="#aaa";
  ctx.fillText("Characteristic Function Ï†(t)", unitX-90, unitY-120);

  ctx.fillText("Re: "+re.toFixed(3), 20, H-40);
  ctx.fillText("Im: "+im.toFixed(3), 20, H-20);
}

distSelect.addEventListener("change", draw);
tSlider.addEventListener("input", draw);

draw();
</script>

</body>
</html>
