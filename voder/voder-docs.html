<!-- Documentation panel for Voder (loaded dynamically into index.html) -->

<div class="docpanel" id="docPanel" role="dialog" aria-label="Documentation">
  <div class="dochead">
    <div class="tabs" role="tablist" aria-label="Docs tabs">
      <button class="tab" role="tab" aria-selected="true" aria-controls="tabHistory" id="tabBtnHistory">History</button>
      <button class="tab" role="tab" aria-selected="false" aria-controls="tabPhysics" id="tabBtnPhysics">Physics</button>
      <button class="tab" role="tab" aria-selected="false" aria-controls="tabPhonemes" id="tabBtnPhonemes">Phonemes</button>
      <button class="tab" role="tab" aria-selected="false" aria-controls="tabUsage" id="tabBtnUsage">Usage</button>
      <button class="tab" role="tab" aria-selected="false" aria-controls="tabInfo" id="tabBtnInfo">Info</button>
      <button class="tab" role="tab" aria-selected="false" aria-controls="tabConfig" id="tabBtnConfig">Config</button>
    </div>
  </div>
  <div class="docbody" id="docbody">
    <section id="tabHistory">
      <h4>The VODER</h4>

      <div class="doc-section">
        <p>The <b data-term="voder">Voice Operation DEmonstratoR</b> (VODER) was the first <b data-term="synthesizer">electronic speech synthesizer</b>, demonstrated at the <b data-term="worlds-fair">1939 New York World's Fair</b> by <b data-term="bell-labs">Bell Labs</b>. It represented a landmark achievement in converting human understanding of <b data-term="speech-production">speech production</b> into <b data-term="electronic-circuits">electronic circuits</b>.</p>
      </div>

      <h4>How It Worked</h4>

      <div class="doc-section">
        <p>The VODER operator—always a woman trained for months—controlled the machine like an instrument:</p>

        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Filters</div>
            <div class="info-value"><b data-term="filters">10 frequency-selective filters</b> shaped the spectrum (200 Hz to 2600 Hz)</div>
          </div>

          <div class="info-item">
            <div class="info-label">Wrist Bar</div>
            <div class="info-value">Toggled between <b data-term="voiced">voiced</b> (buzzer) and <b data-term="unvoiced">unvoiced</b> (hiss) excitation</div>
          </div>

          <div class="info-item">
            <div class="info-label">Foot Pedal</div>
            <div class="info-value">Controlled <b data-term="pitch">pitch</b> for voiced sounds</div>
          </div>

          <div class="info-item">
            <div class="info-label">Plosive Keys</div>
            <div class="info-value"><b data-term="plosive">Three plosive keys</b> generated transient bursts for stops (p, t, k)</div>
          </div>
        </div>
      </div>

      <h4>Cultural Impact</h4>

      <div class="doc-section">
        <p>The VODER fascinated millions at the World's Fair. Operators demonstrated by speaking phrases like "She saw me" and singing songs. It proved that <i>speech could be synthesized from scratch</i>—no recordings, just electronic control of <b data-term="resonance">resonance</b> and <b data-term="excitation">excitation</b>.</p>
      </div>

      <h4>This Implementation</h4>

      <div class="doc-section">
        <p>This web version recreates the VODER's core principle: <b data-term="source-filter">source-filter synthesis</b>. You can play it like the original keyboard or use the <b data-term="ipa">IPA</b> phoneme grid to explore systematic control of all English sounds.</p>
      </div>
    </section>

    <section id="tabPhysics" hidden>
      <h4>Source-Filter Theory</h4>

      <div class="doc-section">
        <p>Speech synthesis using the <b data-term="source-filter">source-filter model</b> separates sound production into two independent components:</p>
      </div>

      <h4>Source (Excitation)</h4>

      <div class="info-grid">
        <div class="info-item">
          <div class="info-label">Voiced</div>
          <div class="info-value">Periodic buzz from <b data-term="vocal-folds">vocal fold vibration</b>. Controlled by <code><b data-term="pitch">pitch</b></code> (fundamental frequency <b data-term="f0">f₀</b>)</div>
        </div>

        <div class="info-item">
          <div class="info-label">Unvoiced</div>
          <div class="info-value"><b data-term="white-noise">White noise</b> from turbulent airflow through constrictions (<b data-term="fricative">fricatives</b>, aspirated sounds)</div>
        </div>

        <div class="info-item">
          <div class="info-label">Mixed</div>
          <div class="info-value">Some sounds like [z] use both simultaneously</div>
        </div>
      </div>

      <h4>Filter (Vocal Tract Resonance)</h4>

      <div class="doc-section">
        <p>The <b data-term="vocal-tract">vocal tract</b> acts as a <b data-term="resonant-cavity">resonant cavity</b> with natural frequencies called <b data-term="formants">formants</b>. These are shaped by:</p>

        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Tongue Position</div>
            <div class="info-value">Forward/back, high/low</div>
          </div>

          <div class="info-item">
            <div class="info-label">Lip Rounding</div>
            <div class="info-value">Lengthens vocal tract, lowers formants</div>
          </div>

          <div class="info-item">
            <div class="info-label">Jaw Opening</div>
            <div class="info-value">Affects <b data-term="f1">F1</b> (first formant)</div>
          </div>
        </div>
      </div>

      <h4>Formant Frequencies</h4>

      <div class="doc-section">
        <p>Each vowel has characteristic formant patterns:</p>

        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">[i] "beet"</div>
            <div class="info-value"><b data-term="f1">F1</b>=270 Hz, <b data-term="f2">F2</b>=2290 Hz (high front)</div>
          </div>

          <div class="info-item">
            <div class="info-label">[a] "father"</div>
            <div class="info-value"><b data-term="f1">F1</b>=730 Hz, <b data-term="f2">F2</b>=1090 Hz (low back)</div>
          </div>

          <div class="info-item">
            <div class="info-label">[u] "boot"</div>
            <div class="info-value"><b data-term="f1">F1</b>=300 Hz, <b data-term="f2">F2</b>=870 Hz (high back, rounded)</div>
          </div>
        </div>
      </div>

      <h4>Implementation</h4>

      <div class="doc-section">
        <p>This synthesizer uses <b data-term="bandpass">10 bandpass filters</b> at fixed center frequencies (200–2600 Hz). Activating keys approximates formant peaks by superposing nearby filters with weighted gains. The <b data-term="web-audio">Web Audio API</b> provides:</p>

        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">OscillatorNode</div>
            <div class="info-value">For voiced buzz (<b data-term="sawtooth">sawtooth wave</b>)</div>
          </div>

          <div class="info-item">
            <div class="info-label">BufferSourceNode</div>
            <div class="info-value">With noise for unvoiced hiss</div>
          </div>

          <div class="info-item">
            <div class="info-label">BiquadFilterNode</div>
            <div class="info-value">(<b data-term="bandpass">bandpass</b>) for each frequency channel</div>
          </div>
        </div>
      </div>
    </section>

    <section id="tabPhonemes" hidden>
      <h4>Phoneme Database</h4>

      <div class="doc-section">
        <p>The <b data-term="ipa">IPA Keyboard</b> contains <b>36 phonemes</b> covering <b data-term="general-american">General American English</b>. Each phoneme is defined by:</p>
      </div>

      <h4>Vowels (12)</h4>

      <div class="doc-section">
        <p>Organized by <b data-term="vowel-height">height</b> (high/mid/low) and <b data-term="vowel-backness">backness</b> (front/central/back):</p>

        <div class="phoneme-grid">
          <div class="phoneme-category">
            <div class="category-label">High Front</div>
            <div class="phoneme-list">
              <span class="phoneme-item">[i] beet</span>
              <span class="phoneme-item">[ɪ] bit</span>
            </div>
          </div>

          <div class="phoneme-category">
            <div class="category-label">Mid Front</div>
            <div class="phoneme-list">
              <span class="phoneme-item">[e] bed</span>
              <span class="phoneme-item">[æ] bat</span>
            </div>
          </div>

          <div class="phoneme-category">
            <div class="category-label">Low Back</div>
            <div class="phoneme-list">
              <span class="phoneme-item">[ɑ] father</span>
              <span class="phoneme-item">[ɒ] cot</span>
              <span class="phoneme-item">[ɔ] caught</span>
            </div>
          </div>

          <div class="phoneme-category">
            <div class="category-label">High Back</div>
            <div class="phoneme-list">
              <span class="phoneme-item">[u] boot</span>
              <span class="phoneme-item">[ʊ] foot</span>
            </div>
          </div>

          <div class="phoneme-category">
            <div class="category-label">Central</div>
            <div class="phoneme-list">
              <span class="phoneme-item">[ʌ] but</span>
              <span class="phoneme-item">[ɜ] bird</span>
              <span class="phoneme-item">[ə] about</span>
            </div>
          </div>
        </div>
      </div>

      <h4>Consonants (24)</h4>

      <div class="doc-section">
        <p>Classified by <b data-term="manner">manner</b> and <b data-term="place">place</b> of articulation:</p>

        <div class="phoneme-grid">
          <div class="phoneme-category">
            <div class="category-label"><b data-term="plosive">Plosives</b> (6)</div>
            <div class="phoneme-list">
              <span class="phoneme-item">[p] pat</span>
              <span class="phoneme-item">[b] bat</span>
              <span class="phoneme-item">[t] top</span>
              <span class="phoneme-item">[d] dog</span>
              <span class="phoneme-item">[k] cat</span>
              <span class="phoneme-item">[g] go</span>
            </div>
          </div>

          <div class="phoneme-category">
            <div class="category-label"><b data-term="fricative">Fricatives</b> (9)</div>
            <div class="phoneme-list">
              <span class="phoneme-item">[f] fat</span>
              <span class="phoneme-item">[v] van</span>
              <span class="phoneme-item">[θ] think</span>
              <span class="phoneme-item">[ð] this</span>
              <span class="phoneme-item">[s] sit</span>
              <span class="phoneme-item">[z] zoo</span>
              <span class="phoneme-item">[ʃ] ship</span>
              <span class="phoneme-item">[ʒ] measure</span>
              <span class="phoneme-item">[h] hat</span>
            </div>
          </div>

          <div class="phoneme-category">
            <div class="category-label"><b data-term="nasal">Nasals</b> (3)</div>
            <div class="phoneme-list">
              <span class="phoneme-item">[m] man</span>
              <span class="phoneme-item">[n] no</span>
              <span class="phoneme-item">[ŋ] sing</span>
            </div>
          </div>

          <div class="phoneme-category">
            <div class="category-label"><b data-term="approximant">Approximants</b> (4)</div>
            <div class="phoneme-list">
              <span class="phoneme-item">[l] let</span>
              <span class="phoneme-item">[r] red</span>
              <span class="phoneme-item">[w] wet</span>
              <span class="phoneme-item">[j] yes</span>
            </div>
          </div>

          <div class="phoneme-category">
            <div class="category-label"><b data-term="affricate">Affricates</b> (2)</div>
            <div class="phoneme-list">
              <span class="phoneme-item">[tʃ] church</span>
              <span class="phoneme-item">[dʒ] judge</span>
            </div>
          </div>
        </div>
      </div>

      <h4>Phoneme Representation</h4>

      <div class="doc-section">
        <p>Each phoneme specifies:</p>

        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Filters</div>
            <div class="info-value">Which frequency bands to activate (e.g., [0, 1, 8, 9] for [i])</div>
          </div>

          <div class="info-item">
            <div class="info-label">Gains</div>
            <div class="info-value">Relative amplitudes for each active filter (simulates formant peaks)</div>
          </div>

          <div class="info-item">
            <div class="info-label">Voiced/Unvoiced</div>
            <div class="info-value">Source type (buzz vs. hiss)</div>
          </div>

          <div class="info-item">
            <div class="info-label">Duration</div>
            <div class="info-value">Typical length in milliseconds</div>
          </div>

          <div class="info-item">
            <div class="info-label">Formants</div>
            <div class="info-value">Target F1/F2/F3 frequencies (for reference and visualization)</div>
          </div>
        </div>
      </div>
    </section>

    <section id="tabUsage" hidden>
      <h4>Playing the Voder</h4>

      <h4>Manual Keyboard</h4>

      <div class="doc-section">
        <p>The top section replicates the original 1939 interface:</p>

        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Start Button</div>
            <div class="info-value">Click "Start Voder" to initialize the audio system</div>
          </div>

          <div class="info-item">
            <div class="info-label">Letter Keys</div>
            <div class="info-value">Press A-L, G-H to activate frequency bands</div>
          </div>

          <div class="info-item">
            <div class="info-label">Spacebar</div>
            <div class="info-value">Toggles voiced (green) / unvoiced (red)</div>
          </div>

          <div class="info-item">
            <div class="info-label">Pitch Slider</div>
            <div class="info-value">Adjusts fundamental frequency (60-300 Hz)</div>
          </div>

          <div class="info-item">
            <div class="info-label">C, V, Y Keys</div>
            <div class="info-value">Trigger plosive bursts</div>
          </div>
        </div>
      </div>

      <h4>IPA Keyboard</h4>

      <div class="doc-section">
        <p>Click any phoneme button to synthesize that sound with optimal filter settings. The system automatically:</p>

        <ul class="feature-list">
          <li>Activates the correct frequency bands</li>
          <li>Sets appropriate gains for formant peaks</li>
          <li>Chooses voiced/unvoiced excitation</li>
          <li>Highlights corresponding manual keys</li>
          <li>Updates the lip visualization</li>
        </ul>
      </div>

      <h4>Articulatory Visualization</h4>

      <div class="doc-section">
        <p>The <b data-term="lips">Lips</b> display (top right) shows a simplified model of lip shape for each phoneme:</p>

        <ul class="feature-list">
          <li><b>Rounded vowels</b> (e.g., [u], [o]) show tight lip opening</li>
          <li><b>Spread vowels</b> (e.g., [i], [e]) show wider horizontal opening</li>
          <li><b>Drag</b> to reposition the visualization</li>
          <li><b>Click</b> a lip to open the shape editor</li>
        </ul>
      </div>

      <h4>Tips for Speech Synthesis</h4>

      <div class="tip-box">
        <div class="tip">Use <b>short overlaps</b> when transitioning between phonemes</div>
        <div class="tip"><b>Vary pitch</b> for prosody (rising pitch for questions)</div>
        <div class="tip"><b>Plosives</b> need brief silence before the burst</div>
        <div class="tip"><b>Practice</b>: Original VODER operators trained for 6 months!</div>
      </div>
    </section>

    <section id="tabConfig" hidden>
      <h4>Configuration</h4>

      <div class="doc-section">
        <div class="config-controls">
          <label class="config-label">
            <input type="checkbox" id="lips-toggle" class="config-checkbox">
            <span class="config-label-text">Simple Lips (single mouth outline)</span>
          </label>

          <label class="config-label">
            <input type="checkbox" id="scroll-inspector-toggle" class="config-checkbox">
            <span class="config-label-text">Show Scroll Inspector</span>
          </label>
        </div>
      </div>
    </section>

    <section id="tabInfo" hidden>
      <h4>Technical Information</h4>

      <h4>Audio Parameters</h4>

      <div class="info-grid">
        <div class="info-item">
          <div class="info-label">Sample Rate</div>
          <div class="info-value">44.1 kHz (Web Audio standard)</div>
        </div>

        <div class="info-item">
          <div class="info-label">Filter Q Factor</div>
          <div class="info-value">10 (bandwidth ~20-50 Hz)</div>
        </div>

        <div class="info-item">
          <div class="info-label">Noise Buffer</div>
          <div class="info-value">2 seconds of white noise for unvoiced sounds</div>
        </div>

        <div class="info-item">
          <div class="info-label">Gain Scaling</div>
          <div class="info-value">Normalized to prevent clipping</div>
        </div>
      </div>

      <h4>Filter Bank Frequencies</h4>

      <div class="doc-section">
        <p>The 10 bandpass filters are centered at:</p>

        <div class="filter-grid">
          <div class="filter-item"><span class="filter-num">0</span><span class="filter-freq">200 Hz</span><span class="filter-desc">low F1 for [u], [o]</span></div>
          <div class="filter-item"><span class="filter-num">1</span><span class="filter-freq">350 Hz</span><span class="filter-desc">mid F1</span></div>
          <div class="filter-item"><span class="filter-num">2</span><span class="filter-freq">500 Hz</span><span class="filter-desc">high F1 for [a]</span></div>
          <div class="filter-item"><span class="filter-num">3</span><span class="filter-freq">700 Hz</span><span class="filter-desc">F1/F2 boundary</span></div>
          <div class="filter-item"><span class="filter-num">4</span><span class="filter-freq">900 Hz</span><span class="filter-desc">low F2</span></div>
          <div class="filter-item"><span class="filter-num">5</span><span class="filter-freq">1100 Hz</span><span class="filter-desc">mid F2 for back vowels</span></div>
          <div class="filter-item"><span class="filter-num">6</span><span class="filter-freq">1300 Hz</span><span class="filter-desc">mid F2</span></div>
          <div class="filter-item"><span class="filter-num">7</span><span class="filter-freq">1600 Hz</span><span class="filter-desc">high F2</span></div>
          <div class="filter-item"><span class="filter-num">8</span><span class="filter-freq">2000 Hz</span><span class="filter-desc">F2 for front vowels</span></div>
          <div class="filter-item"><span class="filter-num">9</span><span class="filter-freq">2600 Hz</span><span class="filter-desc">F3 region</span></div>
        </div>
      </div>

      <h4>Sample Phoneme Definition</h4>

      <div class="doc-section">
        <p>Example phoneme entry from <code>phonemeData.js</code>:</p>

        <pre class="code-sample">"i": {
  "ipa": "i",
  "xsampa": "i:",
  "category": "vowel",
  "height": "high",
  "backness": "front",
  "voiced": true,
  "formants": {
    "f1": 270,
    "f2": 2290,
    "f3": 3010
  },
  "filters": [0, 1, 8, 9],
  "gains": [0.3, 0.8, 1.0, 0.7],
  "duration": 150,
  "examples": ["beat", "see", "tree"]
}</pre>

        <div class="info-grid" style="margin-top: 16px;">
          <div class="info-item">
            <div class="info-label">filters</div>
            <div class="info-value">Array of filter indices [0-9]</div>
          </div>

          <div class="info-item">
            <div class="info-label">gains</div>
            <div class="info-value">Amplitudes for each filter (0-1)</div>
          </div>

          <div class="info-item">
            <div class="info-label">voiced</div>
            <div class="info-value">true/false (buzzer vs. noise)</div>
          </div>

          <div class="info-item">
            <div class="info-label">duration</div>
            <div class="info-value">Typical length in milliseconds</div>
          </div>

          <div class="info-item">
            <div class="info-label">formants</div>
            <div class="info-value">Target F1, F2, F3 frequencies</div>
          </div>

          <div class="info-item">
            <div class="info-label">examples</div>
            <div class="info-value">Words demonstrating the sound</div>
          </div>
        </div>
      </div>

      <h4>Browser Compatibility</h4>

      <div class="tip-box">
        <div class="tip">Requires <b data-term="web-audio">Web Audio API</b> support (all modern browsers)</div>
        <div class="tip">Best experienced in Chrome/Edge with low-latency audio</div>
      </div>
    </section>
  </div>
</div>

<!-- Popup for term definitions -->
<div class="term-popup" id="termPopup">
  <div class="term-popup-header">
    <span class="term-popup-title" id="termPopupTitle"></span>
    <button class="term-popup-close" id="termPopupClose">×</button>
  </div>
  <div class="term-popup-body" id="termPopupBody"></div>
</div>
